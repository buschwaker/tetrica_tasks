![example workflow](https://github.com/buschwaker/tetrica_tasks/actions/workflows/main.yml/badge.svg)

# Тестовое задание на позицию Junior Python Developer


## Особенности проекта
Перед написанием основного кода были написаны юнит-тесты(директория [tests](https://github.com/buschwaker/tetrica_tasks/tree/main/tasks)). Использовалась методология TDD. На этапе разработки простые фрагменты кода контролировались с помощью `doctest`

## Workflow

При совершении триггер-действия(пуш в ветку `main`):
- Проект разворачивается на тестовом сервере
- Запуск юнит-тестов
- Проверка основного кода на соответствие стилю PEP8, запуск анализатора типов данных `mypy`
- Проверка кода юнит-тестов на соответствие стилю PEP8
- Отправка сообщения в телеграм об успешности выполнения вышеперечисленных инструкций

## Инструкция по запуску проекта на своей машине:
1. Скачиваем репозиторий
2. Устанавливаем и активируем виртуальное окружение  
3. Устанавливаем зависимости `pip install -r requirements.txt`

## Описание заданий
[Первое задание](https://github.com/buschwaker/tetrica_tasks/blob/main/tasks/task1.py), [Второе задание](https://github.com/buschwaker/tetrica_tasks/blob/main/tasks/task2.py), [Третье задание](https://github.com/buschwaker/tetrica_tasks/blob/main/tasks/task3.py)

### Первое задание
По заданию для группы из единиц и нулей `111111111110000000000000000` требовалось написать функцию, возвращающую значение индекса первого нуля.

<p>Я же расширил реализацию, написав функцию, возвращающую первый индекс следующей группы символов в последовательности.</p>

Так написана рекурсивная функция, проходящая по всем элементам массива, до того, что отличен от предыдущих, возвращая в качестве значения глубину рекурсии(в данном случае номер индекса), функция имеет для крайних случая: длина массива равна 0 или 1. Если массив состоит из одинаковых элементов, то будет достигнут крайний случай для длины массива, равной 1, функция вернет None, будет напечатано `Всего одна группа знаков!`

### Второе задание
По заданию нужно было получить с русской википедии список всех животных и вывести количество животных на каждую букву алфавита.

Для получения необходимых данных со страницы была использована `Wikipedia API`, данный пакет позволил получить именования животных в виде упорядоченной по алфавиту последовательности

Далее данные были распределены по спискам, хранящихся под ключами(от А до Я) специального словаря. Длины этих списков были подсчитаны и возвращены в виде целых чисел, сохраненных под соответствующей буквой(ключом).

Т.к. данный код потенциально может быть задеплоен на боевой сервер, решено было использовать логирование для контроля за уязвимыми фрагментами программы.

### Третье задание

По заданию нужно было написать функцию, которая получает на вход словарь с интервалами и возвращает время общего присутствия ученика и учителя на уроке (в секундах). Интервалы хранятся в виде четного по длине списка таймстемпов, где четные элементы -- время входа, нечетные -- выхода. Время общего присутствия ученика и учителя должно быть ограничено длиной урока, которая тоже представляет собой два значения: время входа и выхода.

Для начала я написал функцию, упаковывающую список таймстемпов в двумерный массив, в каждой строчке которого хранится информация об отдельной сессии(вход и выход пользователя). Далее по продолжительности каждой сессии и продолжительности урока формируется множество из секунд, проведенных пользователем на уроке. Дальше с помощью встроенного метода intersection вычисляется общее для обоих пользователей подмножество, длина этого подмножества и есть совместное проведенное на уроке время.

Т.к. данный код потенциально может быть задеплоен на боевой сервер, решено было использовать логирование для контроля за уязвимыми фрагментами программы.

## Хотелось бы реализовать, планы на проект(не успел из-за дэдлайна)
1. Вписать данные программы в некоторое вэб-приложение, чтобы к функционалу программ можно было обращаться с помощью вэб-интерфейса
2. Создать `Dockerfile`, чтобы можно было для данного приложения создать образ
3. Добавить в `main.yml` `job`, который бы обновлял образ и добавлял бы обновленную версию на `DockerHub`.
4. На боевом сервере разместить `docker-compose` для подтягивания образа вэб-приложения, `nginx` и `postgresql`. А также добавить файл с настройками `nginx.conf`.
5. В `main.yml` добавить инструкции по сборке контейнера из образов на боевом сервере.
